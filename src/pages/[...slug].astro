---
import { CollectionEntry, getCollection } from "astro:content";
import Layout from "../layouts/PublicationLayout.astro";
import TableOfContents from "@components/PublicationToc.vue";

export async function getStaticPaths() {
  const publication2023Entries = await getCollection("publication2023");

  return publication2023Entries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry, collection: publication2023Entries },
  }));
}

interface Props {
  entry: CollectionEntry<"publication2023">;
}

const { entry, collection } = Astro.props;
const { Content, headings } = await entry.render();
---

<Layout seo={entry.data.seo} contentModifierClass="publication">
  <!-- <h1>{entry.data.title}</h1> -->
  <Content />

  <TableOfContents
    headings={headings}
    collection={collection}
    currentEntry={entry.id}
    client:only
    slot="sidebar"
  />
</Layout>
